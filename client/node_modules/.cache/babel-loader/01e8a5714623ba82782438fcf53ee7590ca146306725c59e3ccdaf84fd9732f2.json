{"ast":null,"code":"import React from\"react\";import{SERVER_API}from\"./params/params\";import{useNavigate}from\"react-router-dom\";import{ResponseStatus}from\"./types/ResponseStatus\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const emptyUser={id:\"\",username:\"\",password:\"\",firstName:\"\",lastName:\"\",birthday:new Date()};export default function Profile(){const[message,setMessage]=React.useState(\"\");const[user,setUser]=React.useState(emptyUser);const nav=useNavigate();React.useEffect(()=>{(async()=>{try{const res=await fetch(\"\".concat(SERVER_API,\"/users\"));if(res.status!==200){nav(\"/login\");}const data=await res.json();console.log(data);setUser(data.value);}catch(e){console.log(e);setMessage(\"Impossibile raggiungere il server\");}})();},[]);async function handleLogout(e){e.preventDefault();// TODO: validate inputs (not empty, max length)\ntry{const res=await fetch(\"\".concat(SERVER_API,\"/users/logout\"),{method:\"POST\"});const resBody=await res.json();console.log(resBody);if(resBody.status===ResponseStatus.GOOD){alert(\"Logout effettuato correttamente!\");nav(\"/login\");}else{setMessage(\"Errore durante il tentativo di logout\");}}catch(e){setMessage(\"Impossibile raggiungere il server\");}}async function handleDelete(e){e.preventDefault();// TODO: validate inputs (not empty, max length)\ntry{const res=await fetch(\"\".concat(SERVER_API,\"/users\"),{method:\"DELETE\"});const resBody=await res.json();console.log(resBody);if(resBody.status===ResponseStatus.GOOD){alert(\"Utente eliminato correttamente!\");nav(\"/login\");}else{setMessage(\"Errore durante il tentativo di cancellazione\");}}catch(e){setMessage(\"Impossibile raggiungere il server\");}}return/*#__PURE__*/_jsxs(_Fragment,{children:[message&&/*#__PURE__*/_jsx(\"div\",{children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{children:user.username}),/*#__PURE__*/_jsx(\"div\",{children:user.password}),/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"#ffff00\"},onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"#ffff00\"},onClick:handleDelete,children:\"Cancella Account\"})]})]});}","map":{"version":3,"names":["React","SERVER_API","useNavigate","ResponseStatus","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","emptyUser","id","username","password","firstName","lastName","birthday","Date","Profile","message","setMessage","useState","user","setUser","nav","useEffect","res","fetch","concat","status","data","json","console","log","value","e","handleLogout","preventDefault","method","resBody","GOOD","alert","handleDelete","children","className","style","backgroundColor","onClick"],"sources":["/Users/alessioprato/Desktop/SELFIE-incompleto-/client/src/Profile.tsx"],"sourcesContent":["import React from \"react\";\nimport { SERVER_API } from \"./params/params\";\nimport { ResponseBody } from \"./types/ResponseBody\";\nimport { useNavigate } from \"react-router-dom\";\nimport User from \"./types/User\";\nimport { ResponseStatus } from \"./types/ResponseStatus\";\n\nconst emptyUser: User = {\n\tid: \"\",\n\tusername: \"\",\n\tpassword: \"\",\n\tfirstName: \"\",\n\tlastName: \"\",\n\tbirthday: new Date(),\n};\nexport default function Profile(): React.JSX.Element {\n\tconst [message, setMessage] = React.useState(\"\");\n\tconst [user, setUser] = React.useState(emptyUser);\n\n\tconst nav = useNavigate();\n\n\tReact.useEffect(() => {\n\t\t(async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(`${SERVER_API}/users`);\n\t\t\t\tif (res.status !== 200) {\n\t\t\t\t\tnav(\"/login\");\n\t\t\t\t}\n\n\t\t\t\tconst data = (await res.json()) as ResponseBody;\n\t\t\t\tconsole.log(data);\n\n\t\t\t\tsetUser(data.value);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\tasync function handleLogout(e: React.MouseEvent<HTMLButtonElement>): Promise<void> {\n\t\te.preventDefault();\n\n\t\t// TODO: validate inputs (not empty, max length)\n\t\ttry {\n\t\t\tconst res = await fetch(`${SERVER_API}/users/logout`, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t});\n\n\t\t\tconst resBody = (await res.json()) as ResponseBody;\n\n\t\t\tconsole.log(resBody);\n\t\t\tif (resBody.status === ResponseStatus.GOOD) {\n\t\t\t\talert(\"Logout effettuato correttamente!\");\n\t\t\t\tnav(\"/login\");\n\t\t\t} else {\n\t\t\t\tsetMessage(\"Errore durante il tentativo di logout\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t}\n\t}\n\n\tasync function handleDelete(e: React.MouseEvent<HTMLButtonElement>): Promise<void> {\n\t\te.preventDefault();\n\n\t\t// TODO: validate inputs (not empty, max length)\n\t\ttry {\n\t\t\tconst res = await fetch(`${SERVER_API}/users`, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t});\n\n\t\t\tconst resBody = (await res.json()) as ResponseBody;\n\t\t\tconsole.log(resBody);\n\n\t\t\tif (resBody.status === ResponseStatus.GOOD) {\n\t\t\t\talert(\"Utente eliminato correttamente!\");\n\t\t\t\tnav(\"/login\");\n\t\t\t} else {\n\t\t\t\tsetMessage(\"Errore durante il tentativo di cancellazione\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{message && <div>{message}</div>}\n\t\t\t<div className=\"profile-container\">\n\t\t\t\t<div>{user.username}</div>\n\t\t\t\t<div>{user.password}</div>\n\t\t\t\t<button style={{ backgroundColor: \"#ffff00\" }} onClick={handleLogout}>\n\t\t\t\t\tLogout\n\t\t\t\t</button>\n\t\t\t\t<button style={{ backgroundColor: \"#ffff00\" }} onClick={handleDelete}>\n\t\t\t\t\tCancella Account\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}