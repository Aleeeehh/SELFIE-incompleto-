{"ast":null,"code":"import React from\"react\";import{SERVER_API}from\"./params/params\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HOME_MAX_NUM_NOTES=4;const HOME_MAX_NOTE_TITLE_CHARS=20;const HOME_MAX_NOTE_TEXT_CHARS=0;function Home(){const[message,setMessage]=React.useState(\"\");const[pomodoros,setPomodoros]=React.useState([]);const[notes,setNotes]=React.useState([]);const[events,setEvents]=React.useState([]);const nav=useNavigate();React.useEffect(()=>{(async()=>{try{const res=await fetch(\"\".concat(SERVER_API,\"/pomodoro\"));if(res.status===200){const resBody=await res.json();setPomodoros(resBody.value);}else{nav(\"/login\");}}catch(e){setMessage(\"Impossibile raggiungere il server\");}try{const res=await fetch(\"\".concat(SERVER_API,\"/notes\"));if(res.status===200){const resBody=await res.json();console.log(resBody);setNotes(resBody.value);}else{nav(\"/login\");}}catch(e){setMessage(\"Impossibile raggiungere il server\");}try{const res=await fetch(\"\".concat(SERVER_API,\"/events\"));if(res.status===200){const resBody=await res.json();setEvents(resBody.value);}else{nav(\"/login\");}}catch(e){setMessage(\"Impossibile raggiungere il server\");}})();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[message&&/*#__PURE__*/_jsx(\"div\",{children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview preview-calendar\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Prossimi eventi:\"}),events.map(event=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:event.title}),/*#__PURE__*/_jsx(\"div\",{children:event.startTime.toString()}),/*#__PURE__*/_jsx(\"div\",{children:event.endTime.toString()}),/*#__PURE__*/_jsx(\"div\",{children:event.location})]}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview preview-pomodoro\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Lista di pomodoro precedenti:\"}),pomodoros.map(pomodoro=>{var _pomodoro$updatedAt;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:pomodoro.studyTime}),/*#__PURE__*/_jsx(\"div\",{children:pomodoro.pauseTime}),/*#__PURE__*/_jsx(\"div\",{children:pomodoro.cycles}),/*#__PURE__*/_jsx(\"div\",{children:(_pomodoro$updatedAt=pomodoro.updatedAt)===null||_pomodoro$updatedAt===void 0?void 0:_pomodoro$updatedAt.toString()})]});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview preview-note\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Le tue note recenti:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-note-cards-container\",children:notes.filter((_,i)=>i<HOME_MAX_NUM_NOTES).map(note=>/*#__PURE__*/_jsx(\"a\",{className:\"preview-note-card\",href:\"/notes/\".concat(note.id),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-note-card-title\",children:note.title.length>HOME_MAX_NOTE_TITLE_CHARS?note.title.substring(0,HOME_MAX_NOTE_TITLE_CHARS)+\"...\":note.title}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-note-card-text\",children:note.text.length>HOME_MAX_NOTE_TEXT_CHARS?note.text.substring(0,HOME_MAX_NOTE_TEXT_CHARS)+\"...\":note.text})]})}))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview preview-projects\",children:\"Qui ci va la preview dei progetti\"})]})]});}export default Home;","map":{"version":3,"names":["React","SERVER_API","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HOME_MAX_NUM_NOTES","HOME_MAX_NOTE_TITLE_CHARS","HOME_MAX_NOTE_TEXT_CHARS","Home","message","setMessage","useState","pomodoros","setPomodoros","notes","setNotes","events","setEvents","nav","useEffect","res","fetch","concat","status","resBody","json","value","e","console","log","children","className","map","event","title","startTime","toString","endTime","location","pomodoro","_pomodoro$updatedAt","studyTime","pauseTime","cycles","updatedAt","filter","_","i","note","href","id","length","substring","text"],"sources":["/Users/alessioprato/Desktop/SELFIE/client/src/Home.tsx"],"sourcesContent":["import React from \"react\";\nimport { SERVER_API } from \"./params/params\";\nimport { ResponseBody } from \"./types/ResponseBody\";\nimport Pomodoro from \"./types/Pomodoro\";\nimport Note from \"./types/Note\";\nimport { Event } from \"./types/Event\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst HOME_MAX_NUM_NOTES = 4;\nconst HOME_MAX_NOTE_TITLE_CHARS = 20;\nconst HOME_MAX_NOTE_TEXT_CHARS = 0;\n\nfunction Home(): React.JSX.Element {\n\tconst [message, setMessage] = React.useState(\"\");\n\tconst [pomodoros, setPomodoros] = React.useState([] as Pomodoro[]);\n\tconst [notes, setNotes] = React.useState([] as Note[]);\n\tconst [events, setEvents] = React.useState([] as Event[]);\n\n\tconst nav = useNavigate();\n\n\tReact.useEffect(() => {\n\t\t(async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(`${SERVER_API}/pomodoro`);\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tconst resBody = (await res.json()) as ResponseBody;\n\t\t\t\t\tsetPomodoros(resBody.value as Pomodoro[]);\n\t\t\t\t} else {\n\t\t\t\t\tnav(\"/login\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(`${SERVER_API}/notes`);\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tconst resBody = (await res.json()) as ResponseBody;\n\t\t\t\t\tconsole.log(resBody);\n\n\t\t\t\t\tsetNotes(resBody.value as Note[]);\n\t\t\t\t} else {\n\t\t\t\t\tnav(\"/login\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(`${SERVER_API}/events`);\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tconst resBody = (await res.json()) as ResponseBody;\n\t\t\t\t\tsetEvents(resBody.value as Event[]);\n\t\t\t\t} else {\n\t\t\t\t\tnav(\"/login\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetMessage(\"Impossibile raggiungere il server\");\n\t\t\t}\n\t\t})();\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{message && <div>{message}</div>}\n\t\t\t<div className=\"home-container\">\n\t\t\t\t<div className=\"preview preview-calendar\">\n\t\t\t\t\t<div>Prossimi eventi:</div>\n\t\t\t\t\t{events.map((event) => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>{event.title}</div>\n\t\t\t\t\t\t\t<div>{event.startTime.toString()}</div>\n\t\t\t\t\t\t\t<div>{event.endTime.toString()}</div>\n\t\t\t\t\t\t\t<div>{event.location}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"preview preview-pomodoro\">\n\t\t\t\t\t<div>Lista di pomodoro precedenti:</div>\n\t\t\t\t\t{pomodoros.map((pomodoro) => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>{pomodoro.studyTime}</div>\n\t\t\t\t\t\t\t<div>{pomodoro.pauseTime}</div>\n\t\t\t\t\t\t\t<div>{pomodoro.cycles}</div>\n\t\t\t\t\t\t\t<div>{pomodoro.updatedAt?.toString()}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"preview preview-note\">\n\t\t\t\t\t<div>Le tue note recenti:</div>\n\t\t\t\t\t<div className=\"preview-note-cards-container\">\n\t\t\t\t\t\t{notes\n\t\t\t\t\t\t\t.filter((_, i) => i < HOME_MAX_NUM_NOTES)\n\t\t\t\t\t\t\t.map((note) => (\n\t\t\t\t\t\t\t\t<a className=\"preview-note-card\" href={`/notes/${note.id}`}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"preview-note-card-title\">\n\t\t\t\t\t\t\t\t\t\t\t{note.title.length > HOME_MAX_NOTE_TITLE_CHARS\n\t\t\t\t\t\t\t\t\t\t\t\t? note.title.substring(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tHOME_MAX_NOTE_TITLE_CHARS\n\t\t\t\t\t\t\t\t\t\t\t\t  ) + \"...\"\n\t\t\t\t\t\t\t\t\t\t\t\t: note.title}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"preview-note-card-text\">\n\t\t\t\t\t\t\t\t\t\t\t{note.text.length > HOME_MAX_NOTE_TEXT_CHARS\n\t\t\t\t\t\t\t\t\t\t\t\t? note.text.substring(0, HOME_MAX_NOTE_TEXT_CHARS) +\n\t\t\t\t\t\t\t\t\t\t\t\t  \"...\"\n\t\t\t\t\t\t\t\t\t\t\t\t: note.text}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/* <div className=\"preview-note-card-date\">\n\t\t\t\t\t\t\t\t\t\tLast update: {note.updatedAt?.toString()}\n\t\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"preview preview-projects\">Qui ci va la preview dei progetti</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}